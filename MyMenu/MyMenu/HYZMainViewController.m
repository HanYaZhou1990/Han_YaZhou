//
//  HYZMainViewController.m
//  MyMenu
//
//  Created by hanyazhou on 14-8-26.
//  Copyright (c) 2014年 rumi. All rights reserved.
//

#import "HYZMainViewController.h"

@interface HYZMainViewController ()

@end

@implementation HYZMainViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    
    self.title = @"HYZMainViewController";
    self.view.backgroundColor = [UIColor grayColor];
    _textArray = @[@"111111111111111111111111111111111",@"22222222222222222222222222222222222222",@"333333333333333333333333333333333333333",@"44444444444444444444444444444444444444444444444444",@"55555555555555555555555555555555555555555555555",@"66666666666666666666666666666666666666666666",@"777777777777777777777777777777777777777777777777",@"8888888888888888888888888888888888888888888888888888888888",@"9999999999999999999999999999999999999999999999999999999999999999999999999",@"1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010",@"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",@"111111111111111111111111111111111",@"22222222222222222222222222222222222222",@"333333333333333333333333333333333333333",@"44444444444444444444444444444444444444444444444444",@"55555555555555555555555555555555555555555555555",@"66666666666666666666666666666666666666666666",@"777777777777777777777777777777777777777777777777",@"8888888888888888888888888888888888888888888888888888888888",@"9999999999999999999999999999999999999999999999999999999999999999999999999",@"1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010",@"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",@"111111111111111111111111111111111",@"22222222222222222222222222222222222222",@"333333333333333333333333333333333333333",@"44444444444444444444444444444444444444444444444444",@"55555555555555555555555555555555555555555555555",@"66666666666666666666666666666666666666666666",@"777777777777777777777777777777777777777777777777",@"8888888888888888888888888888888888888888888888888888888888",@"9999999999999999999999999999999999999999999999999999999999999999999999999",@"1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010",@"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",@"111111111111111111111111111111111",@"22222222222222222222222222222222222222",@"333333333333333333333333333333333333333",@"44444444444444444444444444444444444444444444444444",@"55555555555555555555555555555555555555555555555",@"66666666666666666666666666666666666666666666",@"777777777777777777777777777777777777777777777777",@"8888888888888888888888888888888888888888888888888888888888",@"9999999999999999999999999999999999999999999999999999999999999999999999999",@"1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010",@"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",@"111111111111111111111111111111111",@"22222222222222222222222222222222222222",@"333333333333333333333333333333333333333",@"44444444444444444444444444444444444444444444444444",@"55555555555555555555555555555555555555555555555",@"66666666666666666666666666666666666666666666",@"777777777777777777777777777777777777777777777777",@"8888888888888888888888888888888888888888888888888888888888",@"9999999999999999999999999999999999999999999999999999999999999999999999999",@"1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010",@"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",@"111111111111111111111111111111111",@"22222222222222222222222222222222222222",@"333333333333333333333333333333333333333",@"44444444444444444444444444444444444444444444444444",@"55555555555555555555555555555555555555555555555",@"66666666666666666666666666666666666666666666",@"777777777777777777777777777777777777777777777777",@"8888888888888888888888888888888888888888888888888888888888",@"9999999999999999999999999999999999999999999999999999999999999999999999999",@"1010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010",@"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"];
    UIBarButtonItem *openItem = [[UIBarButtonItem alloc] initWithTitle:@"Open" style:UIBarButtonItemStylePlain target:self action:@selector(openButtonPressed)];
    self.navigationItem.leftBarButtonItem = openItem;
    
//    [self.tableView registerClass:[HYZTableViewCell class] forCellReuseIdentifier:kTableViewCellIdentifier];
    self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
}

- (void)didReceiveMemoryWarning{[super didReceiveMemoryWarning];}

- (void)openButtonPressed
{
    [self.sideMenuViewController openMenuAnimated:YES completion:nil];
}

#pragma mark - UITableViewDelegate & UITableViewDataSource

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_textArray count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return  [self height:_textArray[indexPath.row] IndexPath:indexPath] + 50;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    HYZTableViewCell *cell = [[HYZTableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:nil withFram:CGRectMake(0, 0, self.tableView.frame.size.width, [self height:_textArray[indexPath.row] IndexPath:indexPath])];
    cell.contentLalble.text = _textArray[indexPath.row];
    return cell;
}

- (CGFloat)height:(NSString *)contentString IndexPath:(NSIndexPath *)indexPath{
    CGFloat f = self.tableView.frame.size.width - 20 ;
    UIFont *font = [UIFont systemFontOfSize:Font];
    NSString *s = _textArray[indexPath.row];
#if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_7_0
    CGSize size = [s sizeWithFont:font constrainedToSize:CGSizeMake(f, CGFLOAT_MAX)];
    return size.height+20 ;
#else
    NSDictionary *attributesDic = @{NSFontAttributeName:font};
    CGSize size = [s boundingRectWithSize:CGSizeMake(f, CGFLOAT_MAX) options:NSStringDrawingUsesLineFragmentOrigin attributes:attributesDic context:nil].size;
    return size.height+20;
#endif
}
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{
    if (scrollView.contentOffset.y <=0) {
        [self.view setTransform:(CGAffineTransformMakeScale(0.5, 0.5))];
    }else if (scrollView.contentOffset.y > (scrollView.contentSize.height - scrollView.frame.size.height)){
        [self.view setTransform:(CGAffineTransformMakeScale(0.5, 0.5))];
    }
}

- (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView{
    scrollView.delegate = self;
    return YES;
}
- (void)scrollViewDidScrollToTop:(UIScrollView *)scrollView{
    NSLog(@"只有点击状态栏才可调用");
}
@end
